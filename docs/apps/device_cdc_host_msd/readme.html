<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>CDC Device and MSD Host Example | Harmony 3 USB Multi-Controller application examples</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="CDC Device and MSD Host Example" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 USB Multi-Controller application examples" /> <meta property="og:description" content="Harmony 3 USB Multi-Controller application examples" /> <link rel="canonical" href="../../apps/device_cdc_host_msd/readme.html" /> <meta property="og:url" content="../../apps/device_cdc_host_msd/readme.html" /> <meta property="og:site_name" content="Harmony 3 USB Multi-Controller application examples" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="CDC Device and MSD Host Example" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Harmony 3 USB Multi-Controller application examples","headline":"CDC Device and MSD Host Example","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"../../apps/device_cdc_host_msd/readme.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../" class="nav-list-link">Harmony 3 USB Multi-Controller application examples</a><ul class="nav-list "><li class="nav-list-item active"><a href="../../apps/device_cdc_host_msd/readme.html" class="nav-list-link active">CDC Device and MSD Host Example</a></li><li class="nav-list-item "><a href="../../apps/device_dual_cdc/readme.html" class="nav-list-link">Dual CDC Device Example</a></li><li class="nav-list-item "><a href="../../apps/host_msd_dual/readme.html" class="nav-list-link">Host MSD Dual Example</a></li></ul></li><li class="nav-list-item"><a href="../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 USB Multi-Controller application examples" aria-label="Search Harmony 3 USB Multi-Controller application examples" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../">Harmony 3 USB Multi-Controller application examples</a></li> <li class="breadcrumb-nav-list-item"><span>CDC Device and MSD Host Example</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="cdc-device-and-msd-host-example-device_cdc_host_msd"> <a href="#cdc-device-and-msd-host-example-device_cdc_host_msd" aria-labelledby="cdc-device-and-msd-host-example-device_cdc_host_msd" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CDC Device and MSD Host Example (device_cdc_host_msd) </h1> <p>This application demonstrates the ability of the MPLAB Harmony USB Stack to support USB Device and Host operation on a PIC32 microcontroller with two USB Controllers.</p> <h2 id="description"> <a href="#description" aria-labelledby="description" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>This application demonstrates USB Device and Host operation on a PIC32 microcontroller with two USB Controllers. One USB peripheral operates in USB Device mode and other peripheral operates in USB Host mode. This demonstrates capability of Harmony USB stack to work with multiple USB controllers.</p> <h2 id="downloading-and-building-the-application"> <a href="#downloading-and-building-the-application" aria-labelledby="downloading-and-building-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Downloading and building the application </h2> <p>To clone or download this application from Github, go to the <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_multi_controller">main page of this repository</a> and then click <strong>Clone</strong> button to clone this repository or download as zip file. This content can also be downloaded using content manager by following these <a href="https://github.com/Microchip-MPLAB-Harmony/contentmanager/wiki">instructions</a>.</p> <p>Path of the application within the repository is <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_multi_controller/apps/device_cdc_host_msd">usb_apps_multi_controller/apps/device_cdc_host_msd</a>.</p> <p>Following table gives the details of project configurations, target device used, hardware and its IDE. Open the project using the respective IDE and build it.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Project Name</th> <th>IDE</th> <th>Target Device</th> <th>Hardware / Configuration</th> </tr> </thead> <tbody> <tr> <td>pic32mk_gp_db.X</td> <td>MPLABX</td> <td>PIC32MK1024GPE100</td> <td><a href="#config_12">PIC32MK General Purpose (GP) Development Board</a></td> </tr> <tr> <td>pic32mk_mcm_curiosity_pro.X</td> <td>MPLABX</td> <td>PIC32MK1024MCM100</td> <td><a href="#config_18">PIC32MK MCM Curiosity Pro Development Board</a></td> </tr> </tbody> </table></div> <h2 id="-configuring-the-hardware"> <a href="#-configuring-the-hardware" aria-labelledby="-configuring-the-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_title"></a> Configuring the Hardware </h2> <h3 id="-pic32mk-general-purpose-gp-development-board"> <a href="#-pic32mk-general-purpose-gp-development-board" aria-labelledby="-pic32mk-general-purpose-gp-development-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_12"></a> <a href="https://www.microchip.com/developmenttools/ProductDetails/dm320106">PIC32MK General Purpose (GP) Development Board</a> </h3> <ul> <li>Switch S4 should be set to the Device position.</li> <li>Jumper J28 must be removed.</li> <li>USB Micro B Connector J12 must be connected to a USB Host for powering the board.</li> <li>USB1 Peripheral (Type A connector - J14) operates in USB Host mode. <ul> <li>USB Flash drives should be attached to J14 (Type A connector)</li> <li>LED 2 on the demonstration board will illuminate to indicate completion of the file transfer.</li> </ul> </li> <li>USB2 Peripheral operates (Type C connector - J15) operates in USB Device mode <ul> <li>Connect J15 to a Host PC.</li> <li>LED1 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> <li>Press S1 to trigger communication from the USB Device to the USB Host.</li> </ul> </li> </ul> <h3 id="-pic32mk-mcm-curiosity-pro-development-board"> <a href="#-pic32mk-mcm-curiosity-pro-development-board" aria-labelledby="-pic32mk-mcm-curiosity-pro-development-board" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a name="config_18"></a> <a href="https://www.microchip.com/Developmenttools/ProductDetails/EV31E34A">PIC32MK MCM Curiosity Pro Development Board</a> </h3> <ul> <li>Switch S200 should be set to the Device position.</li> <li>Jumper J204 must be removed.</li> <li>USB Micro B Connector J203 must be connected to a USB Host for powering the board.</li> <li>USB1 Peripheral (Type A connector - J201) operates in USB Host mode. <ul> <li>USB Flash drives should be attached to J201 (Type A connector)</li> <li>LED 2 on the demonstration board will illuminate to indicate completion of the file transfer.</li> </ul> </li> <li>USB2 Peripheral operates (Type C connector - J202) operates in USB Device mode <ul> <li>Connect J202 to a Host PC.</li> <li>LED1 indicates USB Device Configuration Set Complete event (the USB device functionality has been activated by the USB Host).</li> <li>Press SW1 to trigger communication from the USB Device to the USB Host.</li> </ul> </li> </ul> <h2 id="running-the-application"> <a href="#running-the-application" aria-labelledby="running-the-application" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the Application </h2> <p>This application demonstrates the capability of a PIC32 microcontroller and the MPLAB Harmony USB Host stack to work with two USB Controllers in an application. This application operates USB1 controller on the PIC32MK in USB Host mode and USB2 Controller in USB Device mode.</p> <p>USB1 controller on the PIC32 to operate as USB Host MSD and USB2 peripheral to appear like a serial (COM) port to the host. Do the following to run this demonstration:</p> <ul> <li>Open the project with appropriate IDE. Compile the project and program the target device.</li> <li>Attach a USB Flash drive to the Host connector and Connect USB Device connector to a USB Host. Refer to <a href="#config_title">Configuring the Hardware</a> for details.</li> <li>The CDC Device application is same as <em>cdc_com_port_single</em> demo. Refer to local documentation from <a href="..\..\apps\cdc_com_port_single\readme.md">usb_apps_device/apps/cdc_com_port_single</a>. The documentation is also available in the github path <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_device/apps/cdc_com_port_single">usb_apps_device/apps/cdc_com_port_single</a>.</li> <li>The MSD Host application is same as <em>msd_basic</em> host demo. Refer to local documentation from <a href="..\..\apps\msd_basic\readme.md">usb_apps_host/apps/msd_basic</a>. The documentation is also available in the github path <a href="https://github.com/Microchip-MPLAB-Harmony/usb_apps_host/apps/msd_basic">usb_apps_host/apps/msd_basic</a>.</li> </ul> <p><strong>Note:</strong> The PC driver needed for USB device should be used from <a href="..\..\apps\hid_msd_basic\bin\GenericHIDSimpleDemo_Composite_HID+MSD_Demo_only_PID_0x0054.exe">usb_apps_multi_controller/apps/device_cdc_host_msd\bin\GenericHIDSimpleDemo_Composite_HID+MSD_Demo_only_PID_0x0054.exe</a>. To launch the application, double click the executable <em>GenericHIDSimpleDemo_Composite_HID+MSD_Demo_only_PID_0x0054.exe</em>.</p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
